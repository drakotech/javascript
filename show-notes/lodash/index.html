<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Lodash Demo</title>
    <script src="https://cdn.jsdelivr.net/npm/lodash@4.17.4/lodash.min.js"></script>
  </head>
  <body>
  </body>

  <script> 
      // times
      randNumber = () => {
          return Math.round(Math.random() * 100);
      }

      const sampleNumbers = _.times(5, randNumber); 

      console.log(sampleNumbers);
      //[28, 55, 55, 27, 80]
      // Different numbers every time, may have some duplicates

      /*
        This script will return an array with 5 random numbers
        By use of the _.times function from lodash you can create
        a loop that will take 2 arguments, how many times to run,
        and a function to call that many times.
      
        Much easier to read than a conventional loop. 
      */
      

      // filter
      const players = [
        { name: 'Bregman, A',  battingAverage: 0.284 },
        { name: 'Altuve, J',   battingAverage: 0.346 },
        { name: 'Springer, G', battingAverage: 0.283 },
        { name: 'Gurriel, Y',  battingAverage: 0.299 },
        { name: 'Gonzalez, M', battingAverage: 0.303 }
      ];

      const over300 = _.filter(players, player => {
        return player.battingAverage > 0.300;
      });

      console.log(over300);
      //{name: "Altuve, J", battingAverage: 0.346}
      //{name: "Gonzalez, M", battingAverage: 0.303}

      /*
        This script by using the _.filter function returns an
        array containing the players that have an average over
        300: Altuve and Gonzales.

        The filter function has the abilty to filter through
        a collection and run a function on every item in the
        collection.

        Filter is a functional approach to filtering data.
      */


      // keyBy
      const roster = [
        { position: '3B', name: 'Bregman, A' },
        { position: '2B', name: 'Altuve, J' },
        { position: 'CF', name: 'Springer, G' },
        { position: '1B', name: 'Gurriel, Y' },
        { position: 'LF', name: 'Gonzalez, M' }
      ]

      const positions = _.keyBy(roster, 'position');

      const secondBase = positions['2B'];

      console.log(positions);
      /*
        1B: {position: "1B", name: "Gurriel, Y"}
        2B: {position: "2B", name: "Altuve, J"}
        3B: {position: "3B", name: "Bregman, A"}
        CF: {position: "CF", name: "Springer, G"}
        LF: {position: "LF", name: "Gonzalez, M"}
      */
      console.log(secondBase);
      //{position: "2B", name: "Altuve, J"}

      /*
        The _.keyBy lodash function allows you to reach into a 
        nested set of objects and grab the nested element. 
        
        The positons variables captures each element and stores
        them into a key with the name of the position.

        The secondBase variable returns all with the position
        of "2B".
      */


      // reduce
      const sum = _.reduce([1, 2, 3], function(total, num) {
        return total + num;
      }, 0);

      console.log(sum);
      //6

      /*
        The sum variable leverages reduce to add all the 
        elements together.
      */
      
      const homerunStats = [
        { name: 'Bregman, A',  hr: 19 },
        { name: 'Altuve, J',   hr: 24 },
        { name: 'Springer, G', hr: 34 },
        { name: 'Gurriel, Y',  hr: 18 },
        { name: 'Gonzalez, M', hr: 23 }
      ];
      
      const totalHomeruns = _.reduce(homerunStats, function(total, player) {
        return total + player.hr;
      }, 0);

      console.log(totalHomeruns);
      //118

      /*
        totalHomeruns uses reduce to accumulate all the nested 
        values from one of the keys.
      */

      const links = [
        "https://google.com",
        "https://devcamp.com",
        "https://airbnb.com"
      ];
      
      const webLinks = _.reduce(links, function(content, link) {
        return `<a href='${link}'>${link}</a><br>`.concat(content);
      }, '');

      console.log(webLinks);
      //<a href='https://airbnb.com'>https://airbnb.com</a><br>
      //<a href='https://devcamp.com'>https://devcamp.com</a><br>
      //<a href='https://google.com'>https://google.com</a><br>

      /*
        Reduce takes in 3 arguments to run. This example uses 
        reduce to convers an array of links to generate clickable
        a tags html ready. Notice that because we are using 
        strings this time the third argument is ' ' not 0.
      */

      
      // random
      lodashRandNumber = () => {
        return _.random(1, 100);
      }
      
      const lodashSampleNumbers = _.times(5, lodashRandNumber);
      
      console.log(lodashSampleNumbers);
      //[35, 18, 53, 46, 70]
      // Numbers change every time run.

      /*
        The lodash _.random function is used to generate random
        numbers. It requires a min and max range to function.
      */
  </script>
  <!-- Lodash Homepage: https://lodash.com/ -->
</html>